<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ProcureEase</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4><i class="bi bi-gear-wide-connected me-2"></i>ProcureEase</h4>
        </div>
        
        <ul class="nav flex-column sidebar-nav">
            <li class="nav-item">
                <a class="nav-link active" href="dashboard.html">
                    <i class="bi bi-speedometer2"></i>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="requisitions.html">
                    <i class="bi bi-clipboard-check"></i>
                    <span class="nav-text">Requisitions</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="vendors.html">
                    <i class="bi bi-people"></i>
                    <span class="nav-text">Vendors</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="purchase-orders.html">
                    <i class="bi bi-receipt"></i>
                    <span class="nav-text">Purchase Orders</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="goods-receipts.html">
                    <i class="bi bi-box-seam"></i>
                    <span class="nav-text">Goods Receipts</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="invoices.html">
                    <i class="bi bi-file-earmark-text"></i>
                    <span class="nav-text">Invoices</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Navbar -->
        <nav class="top-navbar d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <button class="btn btn-link d-md-none" id="sidebarToggle">
                    <i class="bi bi-list fs-4"></i>
                </button>
                <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
            </div>
            
            <div class="d-flex align-items-center">
                <div class="dropdown user-dropdown">
                    <button class="btn dropdown-toggle d-flex align-items-center" type="button" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle fs-4 me-2"></i>
                        <span id="userName">Admin User</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="logoutBtn"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Dashboard Content -->
        <div class="container-fluid p-4">
            <!-- Stats Cards Row -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stats-number" id="totalRequisitions">0</div>
                                <div class="stats-label">Total Requisitions</div>
                            </div>
                            <i class="bi bi-clipboard-check fs-1 opacity-75"></i>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card success">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stats-number" id="totalVendors">0</div>
                                <div class="stats-label">Active Vendors</div>
                            </div>
                            <i class="bi bi-people fs-1 opacity-75"></i>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card warning">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stats-number" id="pendingOrders">0</div>
                                <div class="stats-label">Pending Orders</div>
                            </div>
                            <i class="bi bi-hourglass-split fs-1 opacity-75"></i>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card danger">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stats-number" id="pendingInvoices">0</div>
                                <div class="stats-label">Pending Invoices</div>
                            </div>
                            <i class="bi bi-exclamation-triangle fs-1 opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts and Tables Row -->
            <div class="row">
                <!-- Recent Requisitions -->
                <div class="col-lg-8 mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Recent Requisitions</h5>
                            <a href="requisitions.html" class="btn btn-primary-custom btn-sm">View All</a>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="recentRequisitionsTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Item</th>
                                            <th>Quantity</th>
                                            <th>Requested By</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dynamic content will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="col-lg-4 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Quick Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-3">
                                <a href="requisitions.html?action=new" class="btn btn-primary-custom">
                                    <i class="bi bi-plus-circle me-2"></i>New Requisition
                                </a>
                                <a href="vendors.html?action=new" class="btn btn-accent-custom">
                                    <i class="bi bi-person-plus me-2"></i>Add Vendor
                                </a>
                                <a href="purchase-orders.html?action=new" class="btn btn-outline-primary">
                                    <i class="bi bi-receipt me-2"></i>Create Purchase Order
                                </a>
                                <a href="invoices.html" class="btn btn-outline-secondary">
                                    <i class="bi bi-file-earmark-text me-2"></i>Manage Invoices
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- System Status -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0">System Status</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span>Database Status</span>
                                <span class="badge bg-success">Connected</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span>API Status</span>
                                <span class="badge bg-success">Online</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span>Last Backup</span>
                                <span class="text-muted small">Today 3:00 AM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Recent Activity</h5>
                        </div>
                        <div class="card-body">
                            <div class="timeline" id="activityTimeline">
                                <!-- Dynamic content will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay d-md-none" id="sidebarOverlay"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>